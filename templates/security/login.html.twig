{% extends 'base.html.twig' %}

{% block title %}Вход в систему{% endblock %}

{% block body %}
    <div class="min-h-screen flex items-center justify-center px-4 py-12 sm:px-6 lg:px-8">
        <div class="w-full max-w-md space-y-8 bg-white rounded-2xl shadow-xl p-8 border border-gray-200">
            <div class="text-center">
                <h2 class="text-3xl font-extrabold text-gray-900">Вход в аккаунт</h2>
                <p class="mt-2 text-sm text-gray-500">
                    Добро пожаловать обратно в
                    <span class="text-red-600 font-semibold">Domino Outdoor</span>
                </p>
            </div>

            {% if app.user %}
                <div class="text-green-600 text-center">
                    Вы уже вошли как {{ app.user.userIdentifier }},
                    <a href="{{ path('app_logout') }}" class="underline hover:text-green-800">выйти</a>
                </div>
            {% else %}
                <form class="mt-8 space-y-6" action="{{ path('app_login') }}" method="POST">
                    <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}" />

                    <!-- Email -->
                    <div>
                        <label for="email" class="block text-sm font-medium text-gray-700">Почта</label>
                        <div class="mt-1">
                            <input id="email" name="_username" type="email" autocomplete="email" required autofocus
                                   class="appearance-none block w-full px-5 py-4 rounded-xl shadow-sm bg-gray-50 border border-gray-300 placeholder-gray-400 text-gray-900 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500 sm:text-base"
                                   value="{{ last_username }}" />
                        </div>
                    </div>

                    <!-- Пароль -->
                    <div>
                        <label for="password" class="block text-sm font-medium text-gray-700">Пароль</label>
                        <div class="mt-1">
                            <input id="password" name="_password" type="password" autocomplete="current-password" required
                                   class="appearance-none block w-full px-5 py-4 rounded-xl shadow-sm bg-gray-50 border border-gray-300 placeholder-gray-400 text-gray-900 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500 sm:text-base" />
                        </div>
                    </div>

                    <!-- Ошибка -->
                    {% if error %}
                        <div class="text-red-600 text-sm font-medium">
                            {{ error.messageKey|trans(error.messageData, 'security') }}
                        </div>
                    {% endif %}

                    <!-- Кнопка входа -->
                    <div>
                        <button type="submit"
                                class="w-full flex justify-center py-4 px-6 border border-transparent rounded-xl shadow-md text-base font-semibold text-white bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition">
                            <i class="fas fa-sign-in-alt mr-2"></i> Войти
                        </button>
                    </div>
                </form>

                <!-- Разделитель -->
                <div class="relative my-8">
                    <div class="absolute inset-0 flex items-center">
                        <div class="w-full border-t border-gray-300"></div>
                    </div>
                    <div class="relative flex justify-center text-sm">
                        <span class="bg-white px-3 text-gray-500">или войдите с помощью</span>
                    </div>
                </div>

                <!-- Кнопки соцсетей -->
                <div class="flex flex-col gap-3">
                    <a href="{{ path('connect_yandex') }}"
                       class="flex items-center justify-center gap-3 py-3 px-4 rounded-xl border border-gray-300 shadow-sm hover:shadow-md bg-white hover:bg-gray-50 transition">
                        <img src="{{ asset('images/orig.png') }}" alt="Yandex" class="h-5">
                        <span class="font-medium text-gray-800">Войти через Яндекс</span>
                    </a>
                </div>
                <div class="flex flex-col gap-3">
                    <a href=""
                       class="flex items-center justify-center gap-3 py-3 px-4 rounded-xl border border-gray-300 shadow-sm hover:shadow-md bg-white hover:bg-gray-50 transition">
                        <img src="{{ asset('images/img.png') }}" alt="Yandex" class="h-5">
                        <span class="font-medium text-gray-800">Войти через Mail.ru</span>
                    </a>
                </div>


                <!-- Ссылки -->
                <div class="text-sm text-center mt-6 text-gray-500">
                    <a href="#" class="font-medium text-red-600 hover:text-red-500 transition">Забыли пароль?</a>
                </div>
                <div class="text-sm text-center text-gray-500">
                    Нет аккаунта?
                    <a href="{{ path('app_register') }}" class="font-medium text-red-600 hover:text-red-500 transition">Зарегистрируйтесь</a>
                </div>
            {% endif %}
        </div>
    </div>
{% endblock %}
